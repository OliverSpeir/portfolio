---
import "@assets/styles/global.css";
import { ViewTransitions } from "astro:transitions";
import { Head } from "astro-capo";
import Meta from "@components/layout/Meta.astro";
import SkipLinks from "@components/layout/SkipLinks.astro";
import type { CollectionEntry } from "astro:content";
import ThemeManager from "@components/layout/ThemeManager.astro";

type Props = {
	title: string;
	description: string;
	post?: CollectionEntry<"blog"> | undefined;
};
const { title, description, post } = Astro.props;
---

<!doctype html>
<html lang="en" dir="ltr">
	<Head>
		<Meta {title} {description} {post} />
		<ThemeManager />
		<ViewTransitions />
		<script is:inline>
			document.addEventListener("theme-changed", (e) => console.log(e.detail));
		</script>
		<script is:inline>
			theme.getTheme();
		</script>
	</Head>
	<body>
		<SkipLinks />
		<main>
			<slot />
		</main>
		<script>
			function loadFathom() {
				let script = document.createElement("script");
				script.src = "https://cdn.usefathom.com/script.js";
				script.setAttribute("data-site", "IGUNNGJS");
				document.body.appendChild(script);
			}
			window.onload = loadFathom;
			document.addEventListener("astro:page-load", function () {
				loadFathom();
			});
		</script>
	</body>
</html>
